---
title: å‰ç«¯è„šæ‰‹æ¶è¾£ä¹ˆå¤šï¼Œé‚£æˆ‘ä¹Ÿè¦å†™ä¸€ä¸ªç©ç©
top_img: 'https://unsplash.it/800/200?random'
comments: true
cover: 'https://api.dongmanxingkong.com/suijitupian/acg/1080p/index.php'
copyright_author: bo.wang
description: æ‰‹æ‘¸æ‰‹å¼€å‘ä¸€ä¸ªå‰ç«¯è„šæ‰‹æ¶å·¥å…·
sitemap: true
tags:
  - Web
  - è„šæ‰‹æ¶
categories:
  - Web
  - è„šæ‰‹æ¶
abbrlink: 29655
date: 2022-04-13 17:30:24
---

### å‰è¨€
2022å¹´å·²ç»è¿‡äº†å››åˆ†ä¹‹ä¸€è¿˜å¤šäº†ï¼Œä¹‹å‰è¯´å¥½çš„æ¯ä¸ªæœˆä¸€ç¯‡æ–‡ç« å¥½åƒä¹Ÿæ²¡æœ‰è®©è‡ªå·±å…‘ç°ã€‚æœ€è¿‘å…¬å¸åœ¨åšä¸€äº›å‰ç«¯å·¥ç¨‹åŒ–ç›¸å…³çš„ä¸œè¥¿ï¼Œè™½ç„¶å‡†å¤‡åšç»„ä»¶åº“çš„äº‹æƒ…è¢«é¢†å¯¼ç»™æ¯™äº†ï¼Œä¸è¿‡åœ¨è¿™ä¹‹å‰å†™äº†ä¸€ä¸ªè„šæ‰‹æ¶çš„å·¥å…·ï¼Œæ¯•ç«Ÿç°åœ¨è¿™ä¸ªç¯å¢ƒä¸‹ï¼Œè„šæ‰‹æ¶å·¥å…·æ³›æ»¥ï¼Œæ‰€ä»¥å½“ç„¶ä¹Ÿè¦å†™ä¸€å†™ç©ç©ã€‚

- [å‰è¨€](#å‰è¨€)
- [æœ€ç»ˆæ•ˆæœ](#æœ€ç»ˆæ•ˆæœ)
- [æ”¯æŒåŠŸèƒ½](#æ”¯æŒåŠŸèƒ½)
- [å¼€å‘](#å¼€å‘)
- [åˆå§‹åŒ–é¡¹ç›®](#åˆå§‹åŒ–é¡¹ç›®)
    - [è®¾ç½®é¡¹ç›®å…¥å£](#è®¾ç½®é¡¹ç›®å…¥å£)
    - [å…¶ä»–èŠ±é‡Œèƒ¡å“¨çš„ä¸œä¸œ](#å…¶ä»–èŠ±é‡Œèƒ¡å“¨çš„ä¸œä¸œ)
- [é¡¹ç›®æ¨¡æ¿](#é¡¹ç›®æ¨¡æ¿)
- [å‘å¸ƒ](#å‘å¸ƒ)
- [æ€»ç»“](#æ€»ç»“)
- [å‚è€ƒ](#å‚è€ƒ)
- [ç»“è¯­](#ç»“è¯­)

### æœ€ç»ˆæ•ˆæœ
![cliInit](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ead34ddd4d114af1881c1dcf00094939~tplv-k3u1fbpfcp-zoom-1.image)

### æ”¯æŒåŠŸèƒ½
- è‡ªä¸»é€‰æ‹©webç«¯æˆ–ç§»åŠ¨ç«¯ï¼›
- è‡ªä¸»é€‰æ‹©é¡¹ç›®æ¡†æ¶reactæˆ–vueï¼›
- è‡ªä¸»é€‰æ‹©æ˜¯å¦è®¾ç½®è¿œç¨‹gitåœ°å€ï¼›
- æ”¯æŒåœ¨é¡¹ç›®æ¨¡æ¿ä¸­è‡ªå®šä¹‰å˜é‡æ›¿æ¢ï¼›
- è‡ªä¸»é€‰æ‹©æ˜¯å¦è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œå¯é€‰æ‹©npmã€cnpmã€yarnï¼›
- æ”¯æŒä½¿ç”¨updateå‘½ä»¤åœ¨çº¿æ›´æ–°ï¼›
- è‡ªä¸»é€‰æ‹©å·²å­˜åœ¨æ–‡ä»¶ç›®å½•æ˜¯å¦è¦†ç›–ï¼›

### å¼€å‘

### åˆå§‹åŒ–é¡¹ç›®
é‚£ä¹ˆæ¥ä¸‹æ¥å°±å¼€å§‹å¼€å‘äº†ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥æ–°å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹å°±å«`new-cli`å§ï¼Œåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æ–°å»º`package.json`æ–‡ä»¶ï¼Œè®¾ç½®å¸¸ç”¨çš„å­—æ®µï¼Œè®¾ç½®å®Œæˆåå¦‚ä¸‹ï¼š
```json
{
  "name": "new-cli",
  "version": "1.0.0",
  "description": "a react project cli, help you create a react project quickly",
  "bin": {
    "new-cli": "bin/www.js"
  },
  "dependencies": {
    "boxen": "^5.1.2",
    "chalk": "^4.1.2",
    "commander": "^9.1.0",
    "consolidate": "^0.16.0",
    "cross-spawn": "^7.0.3",
    "download-git-repo": "^3.0.2",
    "ejs": "^3.1.6",
    "fs-extra": "^10.0.1",
    "inquirer": "^8.2.1",
    "metalsmith": "^2.4.2",
    "ora": "^5.4.1",
    "figlet": "^1.5.2",
    "semver": "^7.3.5",
    "shelljs": "^0.8.5"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/BoWang816/new-cli.git"
  },
  "keywords": [
    "cli",
    "react"
  ],
  "author": "æªæ™¨",
  "publishConfig": {
    "registry": "ç§æœ‰ä»“åº“åœ°å€"
  },
  "engines": {
    "node":"^12.20.0 || >=14"
   }
}
```
é€šè¿‡ä»¥ä¸Šè®¾ç½®ä»¥åï¼Œæˆ‘ä»¬çš„è„šæ‰‹æ¶åå­—å°±å«new-cliï¼Œä¹Ÿå°±æ˜¯è¯´åˆ°æ—¶å€™å®‰è£…çš„æ—¶å€™å°±æ˜¯é€šè¿‡`npm install -g new-cli`è¿›è¡Œå®‰è£…ã€‚binä¸‹é¢è®¾ç½®çš„åç§°å°±æ˜¯ä¸ºäº†è®¾ç½®è„šæ‰‹æ¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”æ˜¯ä»bin/www.js æ–‡ä»¶ä½œä¸ºäº†å…¥å£æ–‡ä»¶ï¼›`dependencies`ä¸­ä¸ºæˆ‘ä»¬éœ€è¦çš„é¡¹ç›®ä¾èµ–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯åƒ**boxenã€chalkã€figletè¿™ä¸€ç±»çš„ä¾èµ–åŒ…åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­å·²ç»ä¸æ”¯æŒrequieræ–¹å¼å¼•å…¥äº†**æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦å®‰è£…ä½ç‰ˆæœ¬çš„åŒ…ï¼›`publishConfig`ä¸­å¯ä»¥è®¾ç½®åˆ°æ—¶å€™éœ€è¦å‘å¸ƒçš„npmåœ°å€ï¼Œå¦‚æœä½ æ­å»ºäº†npmç§æœåˆ™é€šè¿‡è®¾ç½®registryå°±å¯ä»¥å‘å¸ƒåˆ°ä½ çš„ç§æœäº†ã€‚

#### è®¾ç½®é¡¹ç›®å…¥å£

å»ºå¥½`package.json`ä»¥åæˆ‘ä»¬å°±å¼€å§‹å»ºå…¥å£æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯binä¸‹é¢çš„ www.jsï¼Œ äº‹å®ä¸Šä½ çš„å…¥å£æ–‡ä»¶æ”¾ç½®åœ¨æ ¹ç›®å½•ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œå½“ç„¶å¦‚æœæ”¾ç½®åœ¨äº†æ ¹ç›®å½•ï¼Œåˆ™binä¸‹é¢å°±è¦æ”¹ä¸º`new-cli: './www.js'`ã€‚www.js ä¸­ä¸»è¦æ˜¯å¼•å…¥commanderã€inquirerç­‰å·¥å…·åŒ…ï¼Œè¿›è¡Œè„šæ‰‹æ¶å·¥å…·çš„åˆå§‹åŒ–ã€‚å› ä¸º www.js å°†è¦ä½œä¸ºä¸€ä¸ªnodeè„šæœ¬æ¥è¿è¡Œï¼Œå› æ­¤éœ€è¦åœ¨æœ€ä¸Šæ–¹å£°æ˜ç¯å¢ƒï¼š`#! /usr/bin/env node`ï¼Œæˆ‘å†™çš„è¿™ä¸ªè„šæ‰‹æ¶ä¸­æ¶‰åŠåˆ°äº†initã€updateã€helpè¿™ä¸‰ä¸ªå‘½ä»¤ï¼Œå¹¶ä¸”helpæ˜¯commanderæœ¬èº«å°±æ”¯æŒçš„ï¼Œè¿™é‡Œåªæ˜¯åšäº†ä¸€ç‚¹å®šåˆ¶åŒ–ã€‚

- åˆå§‹åŒ–initå‘½ä»¤ã€updateå‘½ä»¤ã€helpå‘½ä»¤

  é¦–å…ˆéœ€è¦å¼•å…¥commanderï¼Œä½¿ç”¨å®ƒçš„programï¼Œ`const {program} = require("commander");`ï¼Œè„šæ‰‹æ¶å·¥å…·çš„ä¸»ä½“å°±æ˜¯å®ƒäº†ï¼Œæˆ‘ä»¬åˆå§‹åŒ–ç›¸å…³çš„å‘½ä»¤ï¼š

  ```js
    #! /usr/bin/env node
    // å¼•å…¥commander
    const {program} = require("commander");
    
    // åˆå§‹åŒ–initå‘½ä»¤ï¼Œ project-nameå°±æ˜¯ä½ çš„é¡¹ç›®åç§°ä¸é¡¹ç›®æ–‡ä»¶å¤¹åç§°
    program.command("init <project-name>")
            // initå‘½ä»¤æè¿°
           .description("create a new project name is <project-name>")
           // initå‘½ä»¤å‚æ•°é¡¹ï¼Œå› ä¸ºåç»­ä¼šè®¾ç½®æ”¯æŒè¦†ç›–æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥è¿™é‡Œæä¾›ä¸€ä¸ª-få‚æ•°
           .option("-f, --force", "overwrite target directory if it exists")
           // initå‘½åæ‰§è¡Œååšçš„äº‹æƒ…
           .action(() => { 
                console.log('doSomething');
            });
           
    program.command("update")
            .description("update the cli to latest version")
            // updateå‘½ä»¤æ‰§è¡Œååšçš„äº‹æƒ…ï¼Œè‡ªåŠ¨æ£€æµ‹æ›´æ–°
            .action(async () => {
                // await checkUpdate();
                console.log('update');
            });
    
    program.on("--help", () => {
        // ç›‘å¬--helpå‘½ä»¤ï¼Œè¾“å‡ºä¸€ä¸ªæç¤º
        console.log(figlet.textSync("new-cli", {
            font: "Standard",
            horizontalLayout: 'full',
            verticalLayout: 'fitted',
            width: 120,
            whitespaceBreak: true
        }));
    });   
    
    // è¿™ä¸ªä¸€å®šä¸èƒ½å¿˜ï¼Œä¸”å¿…é¡»åœ¨æœ€åï¼ï¼ï¼
    program.parse(process.argv);      
  ```

é€šè¿‡è®¾ç½®ä»¥ä¸Šå†…å®¹ï¼Œå…¶å®æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åŸºæœ¬çš„å‘½ä»¤äº†ã€‚æœ¬åœ°è°ƒè¯•çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡`npm link`å‘½ä»¤å°†æˆ‘ä»¬å†™çš„è„šæ‰‹æ¶å·¥å…·ç›´æ¥é“¾æ¥åˆ°æœ¬åœ°çš„å…¨å±€npmä¸­ï¼Œä¸€ç§åˆ™æ˜¯ç›´æ¥é€šè¿‡`node bin/www.js`ç›´æ¥æ‰§è¡Œè¿™ä¸ªjsæ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åè€…å°±å¯ä»¥äº†ã€‚
![initCommand](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0b252bb6857431aa0e38e819bc7a816~tplv-k3u1fbpfcp-zoom-1.image)


- æ‰©å±•initå‘½ä»¤

  æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ‰©å±•initå‘½åï¼Œä¹Ÿå°±æ˜¯åœ¨actionåšä¸€äº›äº‹æƒ…äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æä¾›äº†-fçš„å‚æ•°é€‰é¡¹ï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨åˆå§‹åŒ–é¡¹ç›®çš„æ—¶å€™æ£€æµ‹åˆ°æœ‰åŒåæ–‡ä»¶å¤¹åˆ™è¿›è¡Œè¦†ç›–ï¼Œå› æ­¤åœ¨åˆå§‹åŒ–é¡¹ç›®çš„ç¬¬ä¸€æ­¥æˆ‘ä»¬å°±éœ€è¦æ£€æµ‹å½“å‰è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨åŒåçš„æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨æ²¡æœ‰è®¾ç½®-fçš„æ—¶å€™ç»™å‡ºæç¤ºä¿¡æ¯ï¼ŒåŒæ—¶åœ¨è®¾ç½®äº†-fåç»™å‡ºäºŒæ¬¡æç¤ºï¼ŒåŒæ„è¦†ç›–åˆ™å¼€å§‹åˆå§‹åŒ–é¡¹ç›®ã€‚å› æ­¤actionå‡½æ•°ä¸­å°†è¦æ‰§è¡Œçš„ä»¥ä¸‹å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å¼•å…¥chalkï¼Œpahtï¼Œfs-extrayä»¥åŠåç»­æˆ‘ä»¬è‡ªå·±å†™çš„createã€‚

```js
const chalk = require("chalk");
const path = require("path");
const fs = require('fs-extra');
const figlet = require('figlet');
const create = require('../utils/create');
    
program
    .command("init <project-name>")
    .description("create a new project name is <project-name>")
    .option("-f, --force", "overwrite target directory if it exists")
    .action(async (projectName, options) => {
        const cwd = process.cwd();
        // æ‹¼æ¥åˆ°ç›®æ ‡æ–‡ä»¶å¤¹
        const targetDirectory = path.join(cwd, projectName);
        // å¦‚æœç›®æ ‡æ–‡ä»¶å¤¹å·²å­˜åœ¨
        if (fs.existsSync(targetDirectory)) {
            if (!options.force) {
            // å¦‚æœæ²¡æœ‰è®¾ç½®-fåˆ™æç¤ºï¼Œå¹¶é€€å‡º
                console.error(chalk.red(`Project already exist! Please change your project name or use ${chalk.greenBright(`new-cli create ${projectName} -f`)} to create`))
                return;
            }
            // å¦‚æœè®¾ç½®äº†-fåˆ™äºŒæ¬¡è¯¢é—®æ˜¯å¦è¦†ç›–åŸæ–‡ä»¶å¤¹
            const {isOverWrite} = await inquirer.prompt([{
                name: "isOverWrite",
                type: "confirm",
                message: "Target directory already exists, Would you like to overwrite it?",
                choices: [
                    {name: "Yes", value: true},
                    {name: "No", value: false}
                ]
            }]);
            // å¦‚éœ€è¦†ç›–åˆ™å¼€å§‹æ‰§è¡Œåˆ é™¤åŸæ–‡ä»¶å¤¹çš„æ“ä½œ
            if (isOverWrite) {
                const spinner = ora(chalk.blackBright('The project is Deleting, wait a moment...'));
                spinner.start();
                await fs.removeSync(targetDirectory);
                spinner.succeed();
                console.info(chalk.green("âœ¨ Deleted Successfully, start init project..."));
                console.log();
                // åˆ é™¤æˆåŠŸåï¼Œå¼€å§‹åˆå§‹åŒ–é¡¹ç›®
                // await create(projectName);
                console.log('init project overwrite');
                return;
            }
            console.error(chalk.green("You cancel to create project"));
            return;
        }
        // å¦‚æœå½“å‰è·¯å¾„ä¸­ä¸å­˜åœ¨åŒåæ–‡ä»¶å¤¹ï¼Œåˆ™ç›´æ¥åˆå§‹åŒ–é¡¹ç›®
        // await create(projectName);
        console.log('init project');
    });
```
æˆ‘ä»¬å†æ¥æŸ¥çœ‹ç°åœ¨çš„æ•ˆæœï¼š
![initProject](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c11b161fc5e74268b1436a7122364847~tplv-k3u1fbpfcp-zoom-1.image)

- åˆ›å»ºcreateæ–¹æ³•

  åœ¨ä¸Šä¸€æ­¥æ“ä½œä¸­ï¼Œæˆ‘ä»¬è¦†ç›–åŒåæ–‡ä»¶åï¼Œä½¿ç”¨äº†`await create(projectName)`æ–¹æ³•å¼€å§‹åˆå§‹åŒ–é¡¹ç›®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å¼€å‘createæ–¹æ³•ã€‚åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å«`utils`ï¼Œå½“ç„¶ä½ å¯ä»¥éšæ„å«libæˆ–è€…`âœ¨ç‚¹èµ`éƒ½è¡Œï¼Œåœ¨utilsä¸‹é¢æ–°å»ºä¸€ä¸ªæ–‡ä»¶å«`create.js`ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†è®¾ç½®ä¸‹è½½åˆå§‹åŒ–é¡¹ç›®ä¸­ä¸€äº›é—®é¢˜è¯¢é—®çš„æ‰§è¡Œã€‚å†…å®¹ä¸»è¦æœ‰ä»¥ä¸‹ï¼š

  ```js
    const inquirer = require("inquirer");
    const chalk = require("chalk");
    const path = require("path");
    const fs = require("fs");
    const boxen = require("boxen");
    const renderTemplate = require("./renderTemplate");
    const downloadTemplate = require('./download');
    const install = require('./install');
    const setRegistry = require('./setRegistry');
    const {baseUrl, promptList} = require('./constants');  
     
    const go = (downloadPath, projectRoot) => {
        return downloadTemplate(downloadPath, projectRoot).then(target => {
        //ä¸‹è½½æ¨¡ç‰ˆ
            return {
                downloadTemp: target
            }
        })
    }
    module.exports = async function create(projectName) {
        // æ ¡éªŒé¡¹ç›®åç§°åˆæ³•æ€§ï¼Œé¡¹ç›®åç§°ä»…æ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ï¼Œå› ä¸ºåç»­è¿™ä¸ªåç§°ä¼šç”¨åˆ°é¡¹ç›®ä¸­çš„package.jsonä»¥åŠå…¶ä»–å¾ˆå¤šåœ°æ–¹ï¼Œæ‰€ä»¥ä¸èƒ½å­˜åœ¨ç‰¹æ®Šå­—ç¬¦
        const pattern = /^[a-zA-Z0-9]*$/;
        if (!pattern.test(projectName.trim())) {
            console.log(`\n${chalk.redBright('You need to provide a projectName, and projectName type must be string or number!\n')}`);
            return;
        }
        // è¯¢é—®
        inquirer.prompt(promptList).then(async answers => {
            // ç›®æ ‡æ–‡ä»¶å¤¹
            const destDir = path.join(process.cwd(), projectName);
            // ä¸‹è½½åœ°å€
            const downloadPath = `direct:${baseUrl}/${answers.type}-${answers.frame}-template.git#master`
            // åˆ›å»ºæ–‡ä»¶å¤¹
            fs.mkdir(destDir, {recursive: true}, (err) => {
                if (err) throw err;
            });
    
            console.log(`\nYou select project template url is ${downloadPath} \n`);
            // å¼€å§‹ä¸‹è½½
            const data = await go(downloadPath, destDir);
            // å¼€å§‹æ¸²æŸ“
            await renderTemplate(data.downloadTemp, projectName);
            // æ˜¯å¦éœ€è¦è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œé»˜è®¤å¦
            const {isInstall, installTool} = await inquirer.prompt([
                {
                    name: "isInstall",
                    type: "confirm",
                    default: "No",
                    message: "Would you like to help you install dependencies?",
                    choices: [
                        {name: "Yes", value: true},
                        {name: "No", value: false}
                    ]
                },
                // é€‰æ‹©äº†å®‰è£…ä¾èµ–ï¼Œåˆ™ä½¿ç”¨å“ªä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·
                {
                    name: "installTool",
                    type: "list",
                    default: "npm",
                    message: 'Which package manager you want to use for the project?',
                    choices: ["npm", "cnpm", "yarn"],
                    when: function (answers) {
                        return answers.isInstall;
                    }
                }
            ]);
            
            // å¼€å§‹å®‰è£…ä¾èµ–
            if (isInstall) {
                await install({projectName, installTool});
            }
    
            // æ˜¯å¦è®¾ç½®äº†ä»“åº“åœ°å€
            if (answers.setRegistry) {
                setRegistry(projectName, answers.gitRemote);
            }

            // é¡¹ç›®ä¸‹è½½æˆåŠŸ
            downloadSuccessfully(projectName);
        });
    }
  ```
    - åœ¨`create.js`æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­äº†åˆå§‹åŒ–çš„é¡¹ç›®åç§°æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚æœåŒ…å«åˆ™ç»™å‡ºé”™è¯¯æç¤ºï¼Œå¹¶ç»ˆæ­¢é¡¹ç›®åˆå§‹åŒ–ã€‚å¦‚æœé¡¹ç›®åç§°åˆæ³•ï¼Œåˆ™å¼€å§‹è¯¢é—®ç”¨æˆ·éœ€è¦çš„é¡¹ç›®æ¨¡æ¿ï¼š
      ![askTpl](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71cc0d0e27364927b8b7f79c2a4a7066~tplv-k3u1fbpfcp-zoom-1.image)
      æˆ‘ä»¬å°†è¿™äº›è¯¢é—®çš„listæŠ½ç¦»ä¸ºå¸¸é‡ï¼ŒåŒæ—¶ä¹Ÿå°†æ¨¡æ¿çš„åœ°å€æŠ½ç¦»ä¸ºå¸¸é‡ï¼Œå› æ­¤éœ€è¦åœ¨utilsæ–‡ä»¶å¤¹ä¸‹å»ºç«‹ä¸€ä¸ª`constants.js`çš„æ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹å¦‚ä¸‹ï¼š
  ```js
    /**
     * constants.js
     * @author kechen
     * @since 2022/3/25
     */

    const { version } = require('../package.json');

    const baseUrl = 'https://github.com/BoWangBlog';
    const promptList = [
        {
            name: 'type',
            message: 'Which build tool to use for the project?',
            type: 'list',
            default: 'webpack',
            choices: ['webpack', 'vite'],
        },
        {
            name: 'frame',
            message: 'Which framework to use for the project?',
            type: 'list',
            default: 'react',
            choices: ['react', 'vue'],
        },
        {
            name: 'setRegistry',
            message: "Would you like to help you set registry remote?",
            type: 'confirm',
            default: false,
            choices: [
                {name: "Yes", value: true},
                {name: "No", value: false}
            ]
        },
        {
            name: 'gitRemote',
            message: 'Input git registry for the project: ',
            type: 'input',
            when: (answers) => {
                return answers.setRegistry;
            },
            validate: function (input) {
                const done = this.async();
                setTimeout(function () {
                    // æ ¡éªŒæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦æ˜¯å­—ç¬¦ä¸²
                    if (!input.trim()) {
                        done('You should provide a git remote url');
                        return;
                    }
                    const pattern = /^(http(s)?:\/\/([^\/]+?\/){2}|git@[^:]+:[^\/]+?\/).*?.git$/;
                    if (!pattern.test(input.trim())) {
                        done(
                            'The git remote url is validate',
                        );
                        return;
                    }
                    done(null, true);
                }, 500);
            },
        }
    ];

    module.exports = {
        version,
        baseUrl,
        promptList
    }
  ```
å…¶ä¸­*version*ä¸ºæˆ‘ä»¬çš„è„šæ‰‹æ¶ç‰ˆæœ¬å·ï¼Œ*baseUrl*ä¸ºé¡¹ç›®æ¨¡æ¿ä¸‹è½½çš„åŸºç¡€åœ°å€ï¼Œ*promptList*ä¸ºè¯¢é—®ç”¨æˆ·çš„é—®é¢˜åˆ—è¡¨ï¼ŒpromptListçš„å…·ä½“å†™æ³•æ˜¯æ ¹æ®`inquirer.prompt()`æ–¹æ³•æ¥å†™çš„ï¼Œå…·ä½“çš„æ€ä¹ˆå†™åé¢æˆ‘éƒ½ä¼šå°†å®˜æ–¹æ–‡æ¡£åœ°å€é™„ä¸Šï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å‘æŒ¥ã€‚

- é€šè¿‡`inquirer.prompt()`è·å–åˆ°ç”¨æˆ·åé¦ˆçš„ç»“æœä»¥åï¼Œæˆ‘ä»¬ä¼šæ‹¿åˆ°ç›¸å…³çš„å­—æ®µå€¼ï¼Œç„¶åå»æ‹¼æ¥å‡ºä¸‹è½½çš„é¡¹ç›®æ¨¡æ¿åœ°å€ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¼€å§‹ä¸‹è½½é¡¹ç›®æ¨¡æ¿äº†ã€‚è¿™é‡Œæˆ‘ä»¬å†™äº†*go*å‡½æ•°å’Œ*renderTemplate*ä¿©ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªç”¨äºä¸‹è½½é¡¹ç›®æ¨¡æ¿ä¸€ä¸ªç”¨äºæ¸²æŸ“é¡¹ç›®æ¨¡æ¿(å› ä¸ºæ¶‰åŠåˆ°å˜é‡çš„æ›¿æ¢)ã€‚goå‡½æ•°ä¸­å…¶å®æ˜¯ä½¿ç”¨äº†ä»å¤–éƒ¨å¼•å…¥çš„*downloadTemplate*æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å»å…³æ³¨*downloadTemplate*ä¸*renderTemplate*æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥è¦è®²çš„é‡ç‚¹äº†ã€‚

- åˆ›å»ºdownloadæ–¹æ³•

  åœ¨`utils`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåç§°ä¸º`download.js`çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
    ```js
    /**
     * ä¸‹è½½
     * download.js
     * @author kechen
     * @since 2022/3/25
     */
    
    const download = require('download-git-repo')
    const path = require("path")
    const ora = require('ora')
    const chalk = require("chalk");
    const fs = require("fs-extra");
    
    module.exports = function (downloadPath, target) {
        target = path.join(target);
        return new Promise(function (resolve, reject) {
            const spinner = ora(chalk.greenBright('Downloading template, wait a moment...\r\n'));
            spinner.start();
    
            download(downloadPath, target, {clone: true}, async function (err) {
                if (err) {
                    spinner.fail();
                    reject(err);
                    console.error(chalk.red(`${err}download template failed, please check your network connection and try again`));
                    await fs.removeSync(target);
                    process.exit(1);
                } else {
                    spinner.succeed(chalk.greenBright('âœ¨ Download template successfully, start to config it: \n'));
                    resolve(target);
                }
            })
        })
    }
    ```
è¯¥æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`download-git-repo`è¿™ä¸ªç¬¬ä¸‰æ–¹çš„å·¥å…·åº“ï¼Œç”¨äºä¸‹è½½é¡¹ç›®æ¨¡æ¿ï¼Œå› ä¸ºdownload-git-repoçš„è¿”å›ç»“æœæ˜¯ä¸‹è½½æˆåŠŸæˆ–è€…å¤±è´¥ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼çš„æ—¶å€™å¦‚æœç›´æ¥ä½¿ç”¨ä¼šå­˜åœ¨é—®é¢˜ï¼Œå› æ­¤è¿™é‡Œå°è£…ä¸ºpromiseï¼Œå½“errçš„æ—¶å€™ç»™ç”¨æˆ·æŠ›å‡ºå¼‚å¸¸æç¤ºï¼ŒæˆåŠŸåˆ™å°†ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„è¿”å›ç”¨äºåç»­ä½¿ç”¨ã€‚åœ¨`create.js`ä¸­æˆ‘ä»¬ä½¿ç”¨äº†goå‡½æ•°ï¼Œåœ¨goå‡½æ•°æ‰§è¡ŒæˆåŠŸåä¼šè¿”å›ä¸€ä¸ªdataï¼Œé‡Œé¢æ‹¿åˆ°äº†é¡¹ç›®è¦ä¸‹è½½åˆ°å…·ä½“çš„æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œå…¶å®ä¸»è¦æ˜¯ä¸ºäº†è·å–åœ¨downloadä¸­çš„promiseçš„resolveç»“æœï¼Œæ‹¿åˆ°ç›®æ ‡æ–‡ä»¶å¤¹çš„è·¯å¾„åï¼Œå…¶å®é¡¹ç›®æ¨¡æ¿å·²ç»ä¸‹è½½åˆ°äº†è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œå°±å¯ä»¥å¼€å§‹renderTemplateäº†ã€‚

- åˆ›å»ºrenderTemplateæ–¹æ³•

åœ¨`utils`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å«`renderTemplate.js`ï¼Œè¯¥å‡½æ•°çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å°†åˆå§‹åŒ–çš„é¡¹ç›®ä¸­è®¾ç½®çš„å˜é‡è¿›è¡Œæ›¿æ¢ï¼Œä¸»è¦ä½¿ç”¨äº†`metalSmith`å’Œ`consolidate`è¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹çš„åŒ…ï¼Œé€šè¿‡éå†åˆå§‹åŒ–é¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼Œå°†å…¶è½¬æ¢ä¸ºejsæ¨¡æ¿ï¼Œå¹¶æ›¿æ¢ç›¸å…³çš„å˜é‡ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯å‚è€ƒäº†[vww-cli](https://github.com/we452366/vee-cli)çš„æ–¹å¼ï¼Œé€šè¿‡è¯»å–é¡¹ç›®æ¨¡æ¿ä¸­çš„`ask.ts`æ–‡ä»¶ï¼Œè·å–é¡¹ç›®æ¨¡æ¿ä¸­è‡ªå®šä¹‰çš„è¯¢é—®åˆ—è¡¨ï¼Œç„¶åå†è¿›è¡Œæ–‡ä»¶æ¨¡æ¿å¼•æ“æ¸²æŸ“æ›¿æ¢ç›¸å…³è®¾ç½®å¥½çš„å˜é‡ï¼Œä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š

 ```js
    /**
     * æ¸²æŸ“æ¨¡æ¿
     * renderTemplate.js
     * @author kechen
     * @since 2022/3/24
     */
    const MetalSmith = require('metalsmith'); 
    const {render} = require('consolidate').ejs;
    const {promisify} = require('util');
    const path = require("path");
    const inquirer = require('inquirer');
    const renderPro = promisify(render);
    const fs = require('fs-extra');
    
    module.exports = async function renderTemplate(result, projectName) {
        if (!result) {
            return Promise.reject(new Error(`æ— æ•ˆçš„ç›®å½•ï¼š${result}`))
        }
    
        await new Promise((resolve, reject) => {
            MetalSmith(__dirname)
                .clean(false)
                .source(result)
                .destination(path.resolve(projectName))
                .use(async (files, metal, done) => {
                    const a = require(path.join(result, 'ask.ts'));
                    // è¯»å–ask.tsæ–‡ä»¶ä¸­è®¾ç½®å¥½çš„è¯¢é—®åˆ—è¡¨
                    let r = await inquirer.prompt(a);
                    Object.keys(r).forEach(key => {
                        // å°†è¾“å…¥å†…å®¹å‰åç©ºæ ¼æ¸…é™¤ï¼Œä¸ç„¶å®‰è£…ä¾èµ–æ—¶package.jsonè¯»å–ä¼šæŠ¥é”™
                        r[key] = r[key]?.trim() || '';
                    })
                    const m = metal.metadata();
                    const tmp = {
                        ...r,
                        // å°†ä½¿ç”¨åˆ°çš„nameå…¨éƒ¨è½¬æ¢ä¸ºå°å†™å­—æ¯
                        name: projectName.trim().toLocaleLowerCase()
                    }
                    Object.assign(m, tmp);
                    // å®Œæˆååˆ é™¤æ¨¡æ¿ä¸­çš„æ–‡ä»¶
                    if (files['ask.ts']) {
                        delete files['ask.ts'];
                        await fs.removeSync(result);
                    }
                    done()
                })
                .use((files, metal, done) => {
                    const meta = metal.metadata();
                    // éœ€è¦æ›¿æ¢çš„æ–‡ä»¶çš„åç¼€åé›†åˆ
                    const fileTypeList = ['.ts', '.json', '.conf', '.xml', 'Dockerfile', '.json'];
                    Object.keys(files).forEach(async (file) => {
                        let c = files[file].contents.toString();
                        // æ‰¾åˆ°é¡¹ç›®æ¨¡æ¿ä¸­è®¾ç½®å¥½çš„å˜é‡è¿›è¡Œæ›¿æ¢
                        for (const type of fileTypeList) {
                            if (file.includes(type) && c.includes('<%')) {
                                c = await renderPro(c, meta);
                                files[file].contents = Buffer.from(c);
                            }
                        }
                    });
                    done()
                })
                .build((err) => {
                    err ? reject(err) : resolve({resolve, projectName});
                })
        });
    };    
 ```

é€šè¿‡*renderTemplate*æ–¹æ³•ï¼Œæˆ‘ä»¬åŸºæœ¬å°±å®Œæˆæˆ‘ä»¬è„šæ‰‹æ¶çš„ä¸»è¦åŠŸèƒ½äº†ã€‚æˆ‘ä»¬å°±å¯ä»¥å®ç°ä½¿ç”¨initå‘½ä»¤åˆ›å»ºé¡¹ç›®äº†ã€‚è¿™é‡Œæˆ‘é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨åˆ é™¤ask.tsæ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœåé¢ä¸åŠ `await fs.removeSync(result);`è¿™ä¸ªæ–‡ä»¶å°±æ— æ³•åˆ é™¤ï¼Œä½†æ˜¯åŠ ä¸ŠæŒ‰ç†è¯´åˆä¸åˆç†ï¼Œå…·ä½“åŸå› æ²¡æœ‰æ‰¾åˆ°ï¼Œæœ‰çŸ¥é“çš„æœ‹å‹å¯ä»¥ç•™è¨€è§£é‡Šä¸€ä¸‹ï¼Œååˆ†æ„Ÿè°¢ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬åˆå§‹åŒ–é¡¹ç›®çš„åŠŸèƒ½å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸€äº›æ‰©å±•äº†ã€‚

- åˆ›å»ºsetRegistryæ–¹æ³•

  åœ¨`utils`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å«`setRegistry.js`ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©ç”¨æˆ·åˆå§‹åŒ–é¡¹ç›®çš„gitåœ°å€ï¼Œåœ¨ç”¨æˆ·åˆ›å»ºæ˜¯é€‰æ‹©æ˜¯å¦éœ€è¦è‡ªåŠ¨è®¾ç½®é¡¹ç›®ä»“åº“åœ°å€ï¼Œå¦‚æœè®¾ç½®äº†é¡¹ç›®åœ°å€ï¼Œåˆ™è¿™é‡Œä¼šè‡ªåŠ¨åˆå§‹åŒ–gitï¼Œå¹¶è®¾ç½®é¡¹ç›®åœ°å€ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š
  ```js
    /**
     * è®¾ç½®ä»“åº“åœ°å€
     * setRegistry.js
     * @author kechen
     * @since 2022/3/28
     */
    
    const shell = require("shelljs");
    const chalk = require("chalk");
    
    module.exports = function setRegistry(projectName, gitRemote) {
        shell.cd(projectName);
        if (shell.exec('git init').code === 0) {
            if (shell.exec(`git remote add origin ${gitRemote}`).code === 0) {
                console.log(chalk.green(`âœ¨ \n Set registry Successfully, now your local gitRemote is ${gitRemote} \n`));
                return;
            }
            console.log(chalk.red('Failed to set.'));
            shell.exit(1);
        }
    };  
  ```

- åˆ›å»ºinstallæ–¹æ³•

  åœ¨`utils`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å«`install.js`ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©ç”¨æˆ·è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š
  ```js
   /**
     * å®‰è£…ä¾èµ–
     * install.js
     * @author kechen
     * @since 2022/3/22
     */
    const spawn = require("cross-spawn");
    
    module.exports = function install(options) {
        const cwd = options.projectName || process.cwd();
        return new Promise((resolve, reject) => {
            const command = options.installTool;
            const args = ["install", "--save", "--save-exact", "--loglevel", "error"];
            const child = spawn(command, args, {cwd, stdio: ["pipe", process.stdout, process.stderr]});
    
            child.once("close", code => {
                if (code !== 0) {
                    reject({
                        command: `${command} ${args.join(" ")}`
                    });
                    return;
                }
                resolve();
            });
            child.once("error", reject);
        });
    };
  ```

- åˆ›å»ºcheckUpdateæ–¹æ³•

  åœ¨`utils`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å«`checkUpdate.js`ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©ç”¨æˆ·è‡ªåŠ¨æ£€æµ‹å¹¶è¿›è¡Œè„šæ‰‹æ¶æ›´æ–°ï¼Œä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š
  ```js
    /**
     * æ£€æŸ¥æ›´æ–°
     * checkUpdate.js
     * @author kechen
     * @since 2022/3/23
     */
    const pkg = require('../package.json');
    const shell = require('shelljs');
    const semver = require('semver');
    const chalk = require('chalk');
    const inquirer = require("inquirer");
    const ora = require("ora");
    
    const updateNewVersion = (remoteVersionStr) => {
        const spinner = ora(chalk.blackBright('The cli is updating, wait a moment...'));
        spinner.start();
        const shellScript = shell.exec("npm -g install new-cli");
        if (!shellScript.code) {
            spinner.succeed(chalk.green(`Update Successfully, now your local version is latestVersion: ${remoteVersionStr}`));
            return;
        }
        spinner.stop();
        console.log(chalk.red('\n\r Failed to install the cli latest version, Please check your network or vpn'));
    };
    
    module.exports = async function checkUpdate() {
        const localVersion = pkg.version;
        const pkgName = pkg.name;
        const remoteVersionStr = shell.exec(
            `npm info ${pkgName}@latest version`,
            {
                silent: true,
            }
        ).stdout;
    
        if (!remoteVersionStr) {
            console.log(chalk.red('Failed to get the cli version, Please check your network'));
            process.exit(1);
        }
        const remoteVersion = semver.clean(remoteVersionStr, null);
    
        if (remoteVersion !== localVersion) {
            // æ£€æµ‹æœ¬åœ°å®‰è£…ç‰ˆæœ¬æ˜¯å¦æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯åˆ™è¯¢é—®æ˜¯å¦è‡ªåŠ¨æ›´æ–°
            console.log(`Latest version is ${chalk.greenBright(remoteVersion)}, Local version is ${chalk.blackBright(localVersion)} \n\r`)
    
            const {isUpdate} = await inquirer.prompt([
                {
                    name: "isUpdate",
                    type: "confirm",
                    message: "Would you like to update it?",
                    choices: [
                        {name: "Yes", value: true},
                        {name: "No", value: false}
                    ]
                }
            ]);
            if (isUpdate) {
                updateNewVersion(remoteVersionStr);
            } else {
                console.log();
                console.log(`Ok, you can run ${chalk.greenBright('wb-cli update')} command to update latest version in the feature`);
            }
            return;
        }
        console.info(chalk.green("Great! Your local version is latest!"));
    };
  ```
  è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºè„šæ‰‹æ¶æ˜¯å…¨å±€å®‰è£…çš„ï¼Œæ¶‰åŠåˆ°æƒé™çš„é—®é¢˜ï¼Œå› æ­¤åœ¨macä¸‹éœ€è¦ä½¿ç”¨`sudo new-cli update`è¿›è¡Œæ›´æ–°ï¼Œè€Œåœ¨windowsä¸­éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·æ‰§è¡Œ`new-cli update`è¿›è¡Œæ›´æ–°ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„è„šæ‰‹æ¶åŸºæœ¬å°±å®Œæˆå•¦ã€‚

#### å…¶ä»–èŠ±é‡Œèƒ¡å“¨çš„ä¸œä¸œ
ä¸»è¦åŠŸèƒ½åŸºæœ¬å°±æ˜¯ä¸Šé¢è¿™äº›å•¦ï¼Œå¦å¤–æˆ‘ä»¬éœ€è¦åŠ ä¸€ä¸ªé¡¹ç›®åˆ›å»ºæˆåŠŸä¹‹åçš„æç¤ºï¼Œåœ¨ä¸Šæ–‡çš„`create.js`ä¸­æœ€åé¢æœ‰ä¸€ä¸ª*downloadSuccessfully*çš„æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯åˆ›å»ºæˆåŠŸåçš„æç¤ºï¼Œä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š
```js
const downloadSuccessfully = (projectName) => {
    const END_MSG = `${chalk.blue("ğŸ‰ created project " + chalk.greenBright(projectName) + " Successfully")}\n\n ğŸ™ Thanks for using wb-cli !`;
    const BOXEN_CONFIG = {
        padding: 1,
        margin: {top: 1, bottom: 1},
        borderColor: 'cyan',
        align: 'center',
        borderStyle: 'double',
        title: 'ğŸš€ Congratulations',
        titleAlignment: 'center'
    }

    const showEndMessage = () => process.stdout.write(boxen(END_MSG, BOXEN_CONFIG))
    showEndMessage();

    console.log('ğŸ‘‰ Get started with the following commands:');
    console.log(`\n\r\r cd ${chalk.cyan(projectName)}`);
    console.log("\r\r npm install");
    console.log("\r\r npm run start \r\n");
}
```
å…·ä½“çš„å®ç°æ•ˆæœå°±æ˜¯è¿™æ ·çš„ï¼Œè¿™é‡Œæˆ‘æ˜¯æˆªäº†ä¹‹å‰åšå¥½çš„å›¾ã€‚
![createSuccess](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9195687aca8c482193fd025e21514491~tplv-k3u1fbpfcp-zoom-1.image)

### é¡¹ç›®æ¨¡æ¿
æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ¨¡æ¿ï¼Œé‡Œé¢éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹åŒ…å«ä¸€ä¸ª`ask.ts`æ–‡ä»¶ï¼Œå…¶ä»–çš„å°±å’Œæ­£å¸¸é¡¹ç›®ä¸€æ ·å°±å¥½äº†ï¼Œaks.tsçš„æ–‡ä»¶å†…å®¹ç¤ºä¾‹å¦‚ä¸‹ï¼Œ
```js
/**
 * demo
 * aks.ts
 * @author kechen
 * @since 2022/3/24
 */

module.exports = [
  {
    name: 'description',
    message: 'Please enter project description:',
  },
  {
    name: 'author',
    message: 'Please enter project author:',
  },
  {
    name: 'apiPrefix',
    message: 'Please enter project apiPrefix:',
    default: 'api/1.0',
    // @ts-ignore
    validate: function (input) {
      const done = this.async();
      setTimeout(function () {
        // æ ¡éªŒæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦æ˜¯å­—ç¬¦ä¸²
        if (!input.trim()) {
          done(
            'You can provide a apiPrefix, or not it will be defaultã€api/1.0ã€‘',
          );
          return;
        }
        const pattern = /[a-zA-Z0-9]$/;
        if (!pattern.test(input.trim())) {
          done(
            'The apiPrefix is must end with letter or number, like default ã€api/1.0ã€‘',
          );
          return;
        }
        done(null, true);
      }, 300);
    },
  },
  {
    name: 'proxy',
    message: 'Please enter project proxy:',
    default: 'https://www.test.com',
    // @ts-ignore
    validate: function (input) {
      const done = this.async();
      setTimeout(function () {
        // æ ¡éªŒæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦æ˜¯å­—ç¬¦ä¸²
        if (!input.trim()) {
          done(
            'You can provide a proxy, or not it will be defaultã€https://www.test.comã€‘',
          );
          return;
        }
        const pattern =
          /(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&:/~+#]*[\w\-@?^=%&/~+#])?/;
        if (!pattern.test(input.trim())) {
          done(
            'The proxy is must end with letter or number, like default ã€https://www.test.comã€‘',
          );
          return;
        }
        done(null, true);
      }, 300);
    },
  },
];
```
è¿™é‡Œæˆ‘è®¾ç½®äº†å››ä¸ªå˜é‡åˆ†åˆ«æ˜¯descriptionã€authorã€apiPrefixã€proxyï¼Œåœ¨ä½¿ç”¨æ—¶åªéœ€è¦é€šè¿‡`<%= var %>`è¿™ç§æ–¹å¼å°±å¯ä»¥äº†ï¼Œvarå¯ä»¥æ˜¯ä½ åœ¨ask.tsä¸­è®¾ç½®çš„ä»»ä½•å˜é‡ï¼Œå…·ä½“ä½¿ç”¨demoå¦‚ä¸‹ï¼Œ**å½“ç„¶è¦æ›¿æ¢çš„æ–‡ä»¶ç±»å‹å¿…é¡»æ˜¯åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°çš„*renderTemplate*å‡½æ•°ä¸­è®¾ç½®äº†åç¼€åçš„æ–‡ä»¶æ‰å¯ä»¥ã€‚**ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œä½ å°±å¯ä»¥åœ¨é¡¹ç›®æ¨¡æ¿ä¸­è‡ªç”±æ·»åŠ å˜é‡ï¼Œä¸”ä¸éœ€è¦æ›´æ–°è„šæ‰‹æ¶å·¥å…·ã€‚
```json
{
  "name": "xasrd-fe-mobile",
  "description": "<%= description %>",
  "private": true,
  "author": "<%= author %>"
}

```

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„è„šæ‰‹æ¶å°±å…¨éƒ¨å¼€å‘å®Œæˆå•¦ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ€ä¹ˆå‘å¸ƒåˆ°npmæˆ–è€…npmç§æœäº†ã€‚

### å‘å¸ƒ
åœ¨ä¸Šé¢æˆ‘ä»¬è®²è¿‡ï¼Œå¦‚æœéœ€è¦å‘å¸ƒçš„npmç§æœï¼Œåˆ™éœ€è¦åœ¨`package.json`ä¸­é…ç½®publishConfigå¹¶æŒ‡å‘npmç§æœçš„åœ°å€ï¼Œå‘å¸ƒçš„æ—¶å€™åˆ™éœ€è¦é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå‘å¸ƒï¼š
- ç§æœnpmå‘å¸ƒ
    - ç™»é™†ç§æœ
      `npm login --registry=http://xxxxx` xxxxxä¸ºä½ çš„ç§æœåœ°å€
    - å‘å¸ƒ
      `npm publish`

- å®˜æ–¹npmå‘å¸ƒ
    - ç›´æ¥`npm login`ï¼Œå†`npm publish`
    - å‰ææ˜¯ä½ çš„npmæºæŒ‡å‘çš„å®˜æ–¹npm

- é€šè¿‡github actionè‡ªåŠ¨è§¦å‘npmå‘å¸ƒ
    - å…·ä½“è¯·å‚è€ƒï¼š[è¯¦ç»†è®°å½•å¼€å‘ä¸€ä¸ªnpmåŒ…ï¼Œå°è£…å‰ç«¯å¸¸ç”¨çš„å·¥å…·å‡½æ•°](https://juejin.cn/post/7081581923960619015#heading-7)

**å½“ç„¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘å¸ƒçš„æ—¶å€™ï¼Œpackage.jsonä¸­çš„versionç‰ˆæœ¬å·ä¸èƒ½é‡å¤å“ˆï¼ï¼ï¼**

### æ€»ç»“
åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæ•´çš„å¼€å‘äº†ä¸€ä¸ªæ¯”è¾ƒç®€å•å‰ç«¯è„šæ‰‹æ¶å·¥å…·ï¼Œå¹¶å¯ä»¥å‘å¸ƒä½¿ç”¨äº†ã€‚å…¶å®å…·ä½“çš„åšæ³•å¹¶ä¸æ˜¯å¾ˆéš¾ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„å·¥å…·åŒ…å¯ä»¥ç”¨ï¼Œå½“ç„¶å› ä¸ºè¿™ä¸ªå·¥å…·çš„äº¤äº’ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œå„ä½ä¹Ÿå¯ä»¥è‡ªå·±å¥‡æ€å¦™æƒ³ï¼Œåšä¸€äº›æ›´åŠ èŠ±é‡Œèƒ¡å“¨çš„åŠŸèƒ½è¿›è¡Œæ‰©å±•ã€‚ç¤ºä¾‹çš„demoå°±ä¸æ”¾å•¦ï¼ŒåŸºæœ¬æ‰€æœ‰çš„å†…å®¹éƒ½åœ¨ä¸Šé¢æåˆ°äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªç”±å‘æŒ¥ã€‚å½“ç„¶åŸºäºè¿™å¥—æˆ‘è‡ªå·±ä¹Ÿå†™äº†ä¸€ä¸ªåœ°å€æ˜¯[https://www.npmjs.com/package/wb-fe-cli](https://www.npmjs.com/package/wb-fe-cli)ï¼Œä¸è¿‡å› ä¸ºæœ€è¿‘å®åœ¨æ²¡æ—¶é—´ï¼Œæ‰€ä»¥é¡¹ç›®æ¨¡æ¿è¿˜æ²¡æœ‰ï¼Œæš‚æ—¶è¿˜ä¸èƒ½å®Œæ•´çš„è·‘èµ·æ¥ï¼Œåç»­ä¼šæ…¢æ…¢æ›´æ–°çš„ã€‚

### å‚è€ƒ
- [inquirer](https://www.npmjs.com/package/inquirer)
- [boxen](https://www.npmjs.com/package/boxen)
- [vee-cli](https://github.com/we452366/vee-cli)
- [è¯¦ç»†è®°å½•å¼€å‘ä¸€ä¸ªnpmåŒ…ï¼Œå°è£…å‰ç«¯å¸¸ç”¨çš„å·¥å…·å‡½æ•°](https://juejin.cn/post/7081581923960619015)

### ç»“è¯­
æœ€åå¸Œæœ›çœ‹å®Œæœ¬ç¯‡æ–‡ç« åï¼Œå¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå‹¤å¿«çš„è¯å¯ä»¥è‡ªå·±åŠ¨æ‰‹æ‰‹å†™ä¸€å†™å•¦ã€‚å¦å¤–å¸Œæœ›å¤§å®¶èƒ½å¤Ÿå…³æ³¨ä¸€ä¸‹æˆ‘çš„[Github](https://github.com/BoWang816)ï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œå¸¦ä½ ä»¬çœ‹è´ªåƒè›‡ï¼

ä¹Ÿå¯ä»¥å…³æ³¨ä¸€ä¸‹[GridManager](https://github.com/baukh789/GridManager)è¿™ä¸ªå¥½ç”¨çš„è¡¨æ ¼æ’ä»¶ï¼Œæ”¯æŒReactã€Vueï¼Œéå¸¸å¥½ç”¨å“¦ï¼

ä¸‹æœŸï¼Œæˆ‘å°†ä¼šç»™å¤§å®¶å¸¦æ¥ä¸€äº›æˆ‘å¸¸ç”¨çš„Macè½¯ä»¶çš„ä»‹ç»ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ åœ¨æ—¥å¸¸å¼€å‘ä¸å·¥ä½œä¸­å¤§å¤§æå‡å·¥ä½œæ•ˆç‡ï¼ï¼ï¼å¯ä»¥å…ˆé¢„è§ˆä¸€ä¸‹ [æªæ™¨çš„Macè½¯ä»¶æ¨è](https://mac.wangboweb.site)ã€‚

### æ„Ÿè°¢å¤§å®¶çš„é˜…è¯»ï¼ï¼
